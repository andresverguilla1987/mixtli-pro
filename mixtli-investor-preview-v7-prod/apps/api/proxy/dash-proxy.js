const { createProxyMiddleware } = require('http-proxy-middleware'); module.exports=function dashProxy(app){ const GRAFANA_URL=process.env.GRAFANA_URL||''; const PROM_URL=process.env.PROM_URL||''; if(GRAFANA_URL){ app.use('/dash/grafana', createProxyMiddleware({ target:GRAFANA_URL, changeOrigin:true, pathRewrite:{'^/dash/grafana':''}, logLevel:'warn'})); } if(PROM_URL){ app.use('/dash/prom', createProxyMiddleware({ target:PROM_URL, changeOrigin:true, pathRewrite:{'^/dash/prom':''}, logLevel:'warn'})); } };
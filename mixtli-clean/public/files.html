<!doctype html>
<html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mixtli — Archivos del bucket</title>
<style>body{background:#0b0d12;color:#e7e9ee;font-family:system-ui,Segoe UI,Roboto,Ubuntu,Arial}.wrap{max-width:1100px;margin:40px auto;padding:0 16px}.card{background:#0f131a;border:1px solid #1d2430;border-radius:14px;padding:18px;margin-top:24px}table{width:100%;border-collapse:collapse}th,td{padding:10px;border-bottom:1px solid #1b2230}input,button{background:#0f1116;color:#e7e9ee;border:1px solid #2a2f3b;border-radius:10px;padding:8px 12px}</style>
</head><body>
<div class="wrap"><h1>Mixtli — Archivos del bucket</h1><div class="card">
<label>Prefijo</label> <input id="prefix" value="uploads/" style="width:70%"> <button onclick="actual()">Actualizar</button>
<table><thead><tr><th>Archivo (key)</th><th>Tamaño</th><th>Modificado</th></tr></thead><tbody id="tb"></tbody></table>
</div></div>
<script>
async function actual(){
  const p=document.getElementById('prefix').value||'uploads/';
  const r=await fetch('/api/uploads/list?prefix='+encodeURIComponent(p));
  const j=await r.json(); const tb=document.getElementById('tb'); tb.innerHTML='';
  (j.items||[]).forEach(it=>{const tr=document.createElement('tr'); const t1=document.createElement('td');t1.textContent=it.key; const t2=document.createElement('td');t2.textContent=(it.size/1024).toFixed(2)+' KB'; const t3=document.createElement('td');t3.textContent=new Date(it.lastModified).toLocaleString(); tr.append(t1,t2,t3); tb.append(tr);});
}
actual();
</script></body></html>
